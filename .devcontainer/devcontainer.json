// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/python
{
	"name": "PartCAD: Automathod",
	"image": "mcr.microsoft.com/devcontainers/python:1-3.12-bullseye",
	"postCreateCommand": {
		"pre-commit": "pre-commit install  --config .pre-commit-config.yaml"
	},
	"mounts": [
		// TODO: @alexanderilyin: mount ~/.config and ~/.cache from persistant volume to avoid re-downloading
		// "source=op,target=${containerWorkspaceFolder}/.op,type=volume"
	],
	"features": {
		"ghcr.io/devcontainers/features/github-cli:1": {
			"installDirectlyFromGitHubRelease": true,
			"version": "2.63.2"
		},
		"ghcr.io/devcontainers/features/python:1": {
			"installTools": true,
			"toolsToInstall": "pre-commit,poetry",
			"optimize": false,
			"version": "none"
		},
		"ghcr.io/deepspacecartel/devcontainers-features/starship:2": {
			"version": "v1.21.1"
		},
		"ghcr.io/eitsupi/devcontainer-features/jq-likes:2": {
			"jqVersion": "1.7.1",
			"yqVersion": "4.44.6",
		},
		"ghcr.io/devcontainers/features/git-lfs:1": {
			"autoPull": true,
			"installDirectlyFromGitHubRelease": true,
			"version": "3.6.0"
		}
	},
	"customizations": {
		"vscode": {
			"settings": {
				"dotfiles.repository": "partcad/dotfiles"
			},
			// <!-- prettier-ignore-start -->
			"extensions": [
				// Python Environment
				"njpwerner.autodocstring",
				"kevinrose.vsc-python-indent",
				"ms-python.black-formatter",
				"ms-python.python",
				"ms-python.vscode-pylance",
				// Code Formatting
				"esbenp.prettier-vscode",
				"streetsidesoftware.code-spell-checker",
				// GitHub Integration
				"GitHub.copilot",
				"GitHub.vscode-github-actions",
				"GitHub.vscode-pull-request-github",
				// File Headers
				"psioniq.psi-header",
				// Jinja Support
				"samuelcolvin.jinjahtml",
				// Markdown Support
				"yzhang.markdown-all-in-one",
				"bierner.github-markdown-preview",
				"bierner.markdown-checkbox",
				"bierner.markdown-footnotes",
				"bierner.markdown-mermaid",
				"bierner.markdown-preview-github-styles",
				"bierner.markdown-yaml-preamble",
				"chintans98.markdown-jira",
				// Task Management
				"Gruntfuggly.todo-tree",
				"wayou.vscode-todo-highlight",
				// Atlassian Integration
				"Atlassian.atlascode",
				"codecov.codecov",
				"ryanluker.vscode-coverage-gutters"
			]
			// <!-- prettier-ignore-end -->
		}
	}
}
